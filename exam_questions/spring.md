# Spring

[Основная часть спринга это что](#основная-часть-спринга-это-что)

[Какие контексты в спринге вы знаете](#какие-контексты-в-спринге-вы-знаете)

[Что такое бин, скоупы бинов](#что-такое-бин-скоупы-бинов)

[Что такое singleton скоуп бина](#что-такое-singleton-скоуп-бина)

[Ioc контейнер, какие бины в нем хранятся](#ioc-контейнер-какие-бины-в-нем-хранятся)

[AOP что это](#aop-что-это)

[Spring MVC, что это, какой контекст добавляет](#spring-mvc-что-это-какой-контекст-добавляет)

[Как можно без спринга сделать веб приложение](#как-можно-без-спринга-сделать-веб-приложение)

[Что в спринге отвечает за распределение запросов (вопрос про DispatcherServlet)](#что-в-спринге-отвечает-за-распределение-запросов-вопрос-про-dispatcherservlet)

[В чем разница между контроллером и rest-контроллером](#в-чем-разница-между-контроллером-и-rest-контроллером)

[Чем спринг бут отличается от спринг](#чем-спринг-бут-отличается-от-спринг)

# Основная часть спринга это что

Spring — это фреймворк для Java, который упрощает разработку приложений. Его основа — это IoC-контейнер(Inversion of
Control- Это принцип, при котором мы передаем управление созданием и настройкой объектов Spring-у), который:

+ Управляет объектами (бинами).
+ Позволяет внедрять зависимости (Dependency Injection - это способ предоставления объекту его зависимостей извне, вместо того чтобы объект создавал их самостоятельно.).
+ Обеспечивает гибкость и модульность кода.

Кроме IoC-контейнера, в ядро Spring входят:

+ Spring Core – механизм работы с бинами, DI.
+ Spring Context – расширение контейнера IoC, работа с аннотациями (@Component, @Service, @Repository).
+ Spring Beans – конфигурация и управление бинами.
+ Spring AOP – аспектно-ориентированное программирование (логирование, безопасность).

[К оглавлению](#Spring)

# Какие контексты в спринге вы знаете

Контекст (ApplicationContext) — это расширенный IoC-контейнер в Spring, который:

+ Создает и управляет бинами.
+ Выполняет внедрение зависимостей.
+ Обрабатывает события и предоставляет доступ к ресурсам.

В Spring есть несколько типов контекстов (ApplicationContext), которые управляют жизненным циклом бинов и их
зависимостями.
AnnotationConfigApplicationContext (конфигурация через Java), ClassPathXmlApplicationContext (XML-конфигурация),
FileSystemXmlApplicationContext (XML из файловой системы) и WebApplicationContext (для веб-приложений).

[К оглавлению](#Spring)

# Что такое бин, скоупы бинов

Бин (Bean) в Spring — Bean в Spring — это объект, управляемый контейнером Spring IoC. Это основной строительный блок приложения, который регистрируется и конфигурируется контейнером.

+ Аннотация @Bean используется для указания метода, который возвращает объект(бин) и эти бины в дальнейшем можно внедрять в другие компоненты. 
+ Аннотация @Bean используется для явного объявления бина в Java-конфигурации (в классе, помеченном как @Configuration).

#### Как Spring создает бины?

+ Spring считывает конфигурацию из @Configuration, XML или аннотаций на классах. 
+ На основе конфигурации Spring формирует BeanDefinition(это интерфейс в Spring Framework, который описывает метаданные бина в контексте приложения. Он используется для того, чтобы Spring знал, как создать, настроить и управлять объектами (бинами), которые будут использоваться в контейнере Spring.) для каждого бина.
+ Инициализация бина: Вызывается конструктор или фабричный метод. Выполняется внедрение зависимостей (через конструктор, поля или сеттеры). 
+ Постобработка через BeanPostProcessor(инструмент для вмешательства в процесс создания и инициализации бинов в Spring. ) (например, для работы с @Autowired или @PostConstruct).
+ Добавление в контейнер: Готовый бин помещается в ApplicationContext.

#### Как конфигурируется бин?

+ Аннотации (@Bean, @Component, @Value, @Scope).
+ XML-конфигурацию.
+ Java-код (в классе с @Configuration).
+ Средства типа @PostConstruct и @PreDestroy для управления жизненным циклом.

#### Bean scope
+ Singleton
  + Для каждого бина создается только один экземпляр на весь контекст приложения и переиспользуется везде, где он требуется 
  + Используется по-умолчанию 
  + Жизненный цикл бина начинается при загрузке контекста, и заканчивается при его завершении
+ Prototype
  + Каждый раз, когда запрашивается бин, создается новый экземпляр 
  + Бины со скоупом prototype не уничтожаются Spring, так как они выходят из его контроля сразу после создания 
  + НЕ ХРАНЯТСЯ в контексте Spring-а

Web скоуп:

+ request - Создаётся один экземпляр бина на каждый HTTP-запрос. Бин существует только в рамках одного HTTP-запроса.
+ session - Создаётся один экземпляр бина на каждую HTTP-сессию. Бин живёт в течение одной HTTP-сессии.
+ application - Создаётся один экземпляр бина на весь ServletContext (аналогично синглтону, но для веб-приложения). Бин существует в рамках всего времени работы веб-приложения.
+ websocket -Создаётся один экземпляр бина на каждую WebSocket-сессию. Бин живёт в течение времени существования WebSocket-сессии. 

[К оглавлению](#Spring)

# Что такое singleton скоуп бина

Скоуп singleton означает, что Spring создаст только один экземпляр бина на весь жизненный цикл контекста. Это значение
скоупа по умолчанию. Все обращения к бин-контейнеру будут возвращать один и тот же объект.

[К оглавлению](#Spring)

# Ioc контейнер, какие бины в нем хранятся

В IoC контейнере Spring хранятся бины, которые могут быть разных типов: синглтон, прототип, сессионные, и другие. Контейнер управляет их созданием, конфигурацией, зависимостями и уничтожением. С помощью Spring можно настроить управление жизненным циклом бинов, инжекцию зависимостей и их взаимодействие друг с другом через различные механизмы, такие как аннотации, XML или Java-конфигурации.

[К оглавлению](#Spring)

# AOP что это

AOP - это способ добавить в программу дополнительные функции, не трогая основной код программы. Например, у нас есть
метод, который что-то делает. Но нам нужно, чтобы перед началом и в конце работы этого метода писался лог. Вместо того
чтобы добавлять этот код логирования в каждый метод руками - можно вынести его в отдельное место (аспект), а Spring сам
“вставит” его туда, где нужно, без изменений основного кода.

AOP - состоит из:

+ Аспект — это собственно код, в котором заключена служебная логика
+ join point - это событие, запускающее выполнение аспекта. В Spring этим событием всегда является вызов целевого
  метода.
+ Advice(совет) — этой аннотацией мы указываем Spring'у, когда именно выполнять аспект - перед, или после, или вместо
  выполнения целевого метода. Существует несколько типов advice
    + Before: выполняется перед методом
    + After: выполняется после метода, независимо от его результата
    + AfterReturning: выполняется после успешного завершения метода
    + AfterThrowing: выполняется, если метод выбрасывает исключение
    + Around: оборачивает метод, позволяя выполнить код до и после его выполнения
+ pointCut - это наименования методов, выполнение которых Spring должен перехватить и запустить выполнение аспектов

AOP активно используется в Spring Framework для реализации транзакций, безопасности, логирования и других сквозных
задач.
Пример: Spring AOP позволяет легко добавлять аспекты с помощью аннотаций, таких как @Transactional

Аннотация @Transactional в Spring используется для управления транзакциями в приложениях, работающих с базами данных.
Она позволяет декларативно управлять границами транзакций, не требуя написания шаблонного кода для их начала,
завершения или отката.

Когда Spring встречает метод, помеченный @Transactional, он создает прокси вокруг этого метода. Этот прокси управляет
транзакцией:

+ Перед выполнением метода начинается новая транзакция (если не указано иное).
+ Метод выполняется в контексте этой транзакции.
+ Если метод завершается успешно, транзакция фиксируется (commit).
+ Если метод выбрасывает исключение, транзакция откатывается (rollback).

[К оглавлению](#Spring)

# Spring MVC, что это, какой контекст добавляет

Spring MVC — это один из модулей Spring Framework, предназначенный для разработки веб-приложений на основе шаблона Model-View-Controller. Решает следующие проблемы

+ Чёткое разделение логики. Разбиваем логику на Model-View-Controller
+ Поддержка различных шаблонизаторов. JSP, Thymeleaf и т.д
+ Упрощает обработку HTTP-запросов через контроллеры

[К оглавлению](#Spring)

# Как можно без спринга сделать веб приложение

Самый базовый способ создания веб-приложения — использование Java Servlets и JSP (JavaServer Pages). Это стандартные
технологии Java EE.

+ Создайте Servlet: Servlet — это Java-класс, который обрабатывает HTTP-запросы и ответы
+ Создайте JSP-страницу - JSP позволяет встраивать Java-код в HTML
+ Настройте веб-сервер (например, Apache Tomcat): Разместите ваш проект в папке webapps Tomcat. Запустите сервер и
  откройте приложение в браузере.

Если вы хотите создавать веб-приложения без JSP, можно использовать шаблонизаторы - Thymeleaf. Шаблонизатор, который
работает с HTML и поддерживает интеграцию с Servlets

[К оглавлению](#Spring)

# Что в спринге отвечает за распределение запросов (вопрос про DispatcherServlet)

DispatcherServlet — это основной компонент Spring MVC, который обрабатывает входящие HTTP-запросы, направляет их к соответствующим контроллерам, обрабатывает ответы и возвращает их клиенту.

Это центральный обработчик HTTP-запросов в Spring MVC.

#### Основной цикл работы DispatcherServlet

+ Получение HTTP-запроса: DispatcherServlet обрабатывает все запросы, поступающие в приложение (если настроен как фронт-контроллер в web.xml или через Java Config). 
+ Определение подходящего контроллера: С помощью HandlerMapping находит контроллер, который должен обработать запрос, основываясь на URL и методе HTTP. 
+ Выбор метода обработчика:С помощью аннотаций контроллера (@RequestMapping, @GetMapping, @PostMapping и др.) определяется, какой метод должен быть вызван. 
+ Обработка запроса: Контроллер выполняет бизнес-логику и возвращает ModelAndView или объект в формате JSON/XML (например, с @ResponseBody). 
+ Обработка ответа: Результат передается в компонент ViewResolver, который определяет, какое представление (HTML, JSP, JSON и др.) нужно отрендерить. 
+ Возврат клиенту: Готовый HTTP-ответ отправляется обратно клиенту.

[К оглавлению](#Spring)

# В чем разница между контроллером и rest-контроллером

@Controller используется для создания веб-страниц и возвращает имена представлений, а @RestController — для REST API и
возвращает данные напрямую (например, JSON). @RestController — это комбинация @Controller и @ResponseBody.

@Controller подходит для традиционных веб-приложений с HTML-страницами.

@RestController используется для REST API, где клиент ожидает данные (например, мобильные приложения

[К оглавлению](#Spring)

# Чем спринг бут отличается от спринг

Основное его отличие заключается в автоматической настройке и встроенном сервере. Он создан для того, чтобы избавить
разработчиков от необходимости выполнять много рутинной настройки, которая требуется при работе с обычным Spring.

[К оглавлению](#Spring)

